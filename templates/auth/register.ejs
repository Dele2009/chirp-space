<!-- Include Flowbite CDN -->

<div class="container mx-auto pt-16">
  <div class="max-w-xl mx-auto bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md">
    <div class="mx-auto flex justify-center">
      <a href="/" class="flex items-center rounded-full size-24 my-4">
        <img src="/img/app_logo.png" class="w-full h-full" alt="App Logo">
      </a>
    </div>

    <h2 class="text-3xl font-bold mb-4 text-center">Sign Up</h2>
    <p class="text-center text-gray-500 dark:text-gray-400 mb-6">
      Join our community today and connect with millions of people.
    </p>

    <!-- Stepper -->
    <ol class="flex items-center w-full mb-8">
      <li
        class="flex w-full items-center text-blue-600 dark:text-blue-500 after:w-full after:h-1 after:border-b after:border-blue-100 after:border-4 after:inline-block dark:after:border-blue-800">
        <div
          class="flex items-center justify-center w-10 h-10 bg-blue-100 rounded-full lg:h-12 lg:w-12 dark:bg-blue-800">
          <svg class="w-4 h-4 text-blue-600 lg:w-6 lg:h-6 dark:text-blue-300" aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 16">
            <path
              d="M18 0H2a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2ZM6.5 3a2.5 2.5 0 1 1 0 5 2.5 2.5 0 0 1 0-5Z" />
          </svg>
        </div>
      </li>
      <li
        class="flex w-full items-center after:w-full after:h-1 after:border-b after:border-gray-100 after:border-4 after:inline-block dark:after:border-gray-700">
        <div
          class="flex items-center justify-center w-10 h-10 bg-gray-100 rounded-full lg:h-12 lg:w-12 dark:bg-gray-700">
          <svg class="w-4 h-4 text-blue-600 lg:w-6 lg:h-6 dark:text-blue-300" aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 14">
            <path d="M18 0H2a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2ZM2 12V6h16v6H2Z" />
          </svg>
        </div>
      </li>
      <li class="flex items-center w-full">
        <div
          class="flex items-center justify-center w-10 h-10 bg-gray-100 rounded-full lg:h-12 lg:w-12 dark:bg-gray-700">
          <svg class="w-4 h-4 text-blue-600 lg:w-6 lg:h-6 dark:text-blue-300" aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 18 20">
            <path
              d="M16 1h-3.278A1.992 1.992 0 0 0 11 0H7a1.993 1.993 0 0 0-1.722 1H2a2 2 0 0 0-2 2v15a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2ZM7 2h4v3H7V2Z" />
          </svg>
        </div>
      </li>
    </ol>

    <div id="stepper-content">
      <!-- Step 1: Personal Info -->
      <div class="step-content active transition-opacity duration-500 ease-in-out">
        <h3 class="text-lg font-medium mb-4">Personal Information</h3>
        <form id="step-1-form" class="grid gap-4 mb-4 sm:grid-cols-2">
          <div>
            <label for="firstName" class="block text-sm font-medium text-gray-900 dark:text-white">First Name *</label>
            <input type="text" id="firstName" name="firstName" placeholder="John" pattern="[A-Za-z]{2,}" required
              class="input-field" />
          </div>
          <div>
            <label for="lastName" class="block text-sm font-medium text-gray-900 dark:text-white">Last Name *</label>
            <input type="text" id="lastName" name="lastName" placeholder="Doe" pattern="[A-Za-z]{2,}" required
              class="input-field" />
          </div>
          <button type="button" data-stepper-next class="btn-primary w-full">Next: Account Details</button>
        </form>
      </div>

      <!-- Step 2: Account Details -->
      <div class="step-content hidden transition-opacity duration-500 ease-in-out">
        <h3 class="text-lg font-medium mb-4">Account Details</h3>
        <form id="step-2-form" class="grid gap-4 mb-4 sm:grid-cols-2">
          <div>
            <label for="username" class="block text-sm font-medium text-gray-900 dark:text-white">Username</label>
            <input type="text" id="username" name="username" placeholder="username.example"
              pattern="^[a-zA-Z0-9_]{3,15}$" class="input-field" />
          </div>
          <div>
            <label for="email" class="block text-sm font-medium text-gray-900 dark:text-white">Email *</label>
            <input type="email" id="email" name="email" placeholder="name@company.com" required class="input-field" />
          </div>
          <button type="button" data-stepper-next class="btn-primary w-full">Next: Password Setup</button>
          <button type="button" data-stepper-previous class="btn-secondary w-full mt-2">Back</button>
        </form>
      </div>

      <!-- Step 3: Password Setup -->
      <div class="step-content hidden transition-opacity duration-500 ease-in-out">
        <h3 class="text-lg font-medium mb-4">Password Setup</h3>
        <form id="step-3-form" method="POST" action="/users/register">
          <div>
            <label for="password" class="block text-sm font-medium text-gray-900 dark:text-white">Password *</label>
            <input type="password" id="password" name="password" placeholder="••••••••"
              pattern="^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$" required class="input-field" />
          </div>
          <div>
            <label for="confirmPassword" class="block text-sm font-medium text-gray-900 dark:text-white">Confirm
              Password *</label>
            <input type="password" id="confirmPassword" name="confirmPassword" placeholder="••••••••" required
              class="input-field" />
          </div>
          <button type="submit" class="btn-primary w-full">Complete Sign-Up</button>
          <button type="button" data-stepper-previous class="btn-secondary w-full mt-2">Back</button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Styles -->
<style>
  .input-field {
    background-color: var(--tw-bg-opacity, 1) gray-50;
    border: 1px solid gray-300;
    border-radius: 0.5rem;
    padding: 0.625rem;
    width: 100%;
  }

  .btn-primary {
    background-color: #2563eb;
    /* Adjusted to proper blue color */
    color: white;
    padding: 0.625rem;
    border-radius: 0.5rem;
  }

  .btn-secondary {
    background-color: #9ca3af;
    /* Adjusted to proper gray color */
    color: white;
    padding: 0.625rem;
    border-radius: 0.5rem;
  }
</style>

<!-- JavaScript for Stepper -->
<script>
  document.querySelectorAll('[data-stepper-next]').forEach(button => {
    button.addEventListener('click', () => {
      const currentContent = button.closest('.step-content');
      const nextContent = currentContent.nextElementSibling;

      if (nextContent) {
        currentContent.classList.remove('active');
        currentContent.classList.add('hidden');
        nextContent.classList.remove('hidden');
        nextContent.classList.add('active');
      }
    });
  });

  document.querySelectorAll('[data-stepper-previous]').forEach(button => {
    button.addEventListener('click', () => {
      const currentContent = button.closest('.step-content');
      const previousContent = currentContent.previousElementSibling;

      if (previousContent) {
        currentContent.classList.remove('active');
        currentContent.classList.add('hidden');
        previousContent.classList.remove('hidden');
        previousContent.classList.add('active');
      }
    });
  });
</script>